<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:h="http://java.sun.com/jsf/html"
      xml:lang="en" lang="en"
      xmlns:rich="http://richfaces.org/rich">
    <h:head>
        <title>JSF 2.0 Hello World</title>
    </h:head>
    <h:body>
        <h:form>
            <rich:panel header="Steps to reproduce">
                <ol>
                    <li>Click on start push</li>
                    <li>Click on Send message</li>
                    <li>See JS alert with message</li>
                    <li>Click on Stop push</li>
                    <li>Click on Start push again</li>
                    <li>Click on Send message</li>
                    <li>See that after push rerender no message is shown</li>
                </ol>
            </rich:panel>
            <rich:panel header="Push 1">
                <a4j:outputPanel id="push-panel1">
                    <a4j:push address="TEST_ADDRESS1" ondataavailable="alert('event.rf.data=' + event.rf.data)"
                              rendered="#{rf13592Bean.enabled1}"/>
                </a4j:outputPanel>

                <a4j:commandButton id="startBtn1" value="Start Push" action="#{rf13592Bean.startPush1}" render="push-panel1"/>

                <a4j:commandButton id="stopBtn1" value="Stop Push" action="#{rf13592Bean.stopPush1}" render="push-panel1"/>

                <a4j:commandButton id="sendMessage1" value="Send Message" action="#{rf13592Bean.sendMessage1}"/>
            </rich:panel>
            <rich:panel header="Push 2">
                <a4j:outputPanel id="push-panel2">
                    <a4j:push address="TEST_ADDRESS2" ondataavailable="alert('event.rf.data=' + event.rf.data)"
                              rendered="#{rf13592Bean.enabled2}"/>
                </a4j:outputPanel>

                <a4j:commandButton id="startBtn2" value="Start Push" action="#{rf13592Bean.startPush2}" render="push-panel2"/>

                <a4j:commandButton id="stopBtn2" value="Stop Push" action="#{rf13592Bean.stopPush2}" render="push-panel2"/>

                <a4j:commandButton id="sendMessage2" value="Send Message" action="#{rf13592Bean.sendMessage2}"/>
            </rich:panel>
            <rich:panel header="Push 3">
                <a4j:outputPanel id="push-panel3">
                    <a4j:push address="TEST_ADDRESS3" ondataavailable="alert('event.rf.data=' + event.rf.data)"
                              rendered="#{rf13592Bean.enabled3}"/>
                </a4j:outputPanel>

                <a4j:commandButton id="startBtn3" value="Start Push" action="#{rf13592Bean.startPush3}" render="push-panel3"/>

                <a4j:commandButton id="stopBtn3" value="Stop Push" action="#{rf13592Bean.stopPush3}" render="push-panel3"/>

                <a4j:commandButton id="sendMessage3" value="Send Message" action="#{rf13592Bean.sendMessage3}"/>
            </rich:panel>
        </h:form>
    </h:body>

</html>
