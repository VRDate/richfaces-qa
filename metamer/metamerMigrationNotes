testy su z revizie 22840.

Notes to metamer migration:

http://help.github.com/import-from-subversion/
chvilu to trva, ten prikaz na migraciu treba spravit v adresari nad trunkom, trvalo priblizne 5 hodin

vytvorena kratka aplikacia pozostavajuca z 5 component a k nim testy, upravene 
na arquillian
-refactoring:
vela veci tak ze odstranim dependency na richfaces-selenium a pridam arquillian dependency
a potom ctr + shift + O 
-staticke importy si pridam do favorites a potom zmazem jedno pismeno a dam code completition, dobre je mat nastavene v JAva editore --> content assist -> completition overwrites
moje staticke: org.jboss.arquillian.ajocado.Ajocado
org.jboss.arquillian.ajocado.dom.Event
org.jboss.arquillian.ajocado.format.SimplifiedFormat
org.jboss.arquillian.ajocado.javascript.JavaScript
org.jboss.arquillian.ajocado.locator.LocatorFactory
org.jboss.arquillian.ajocado.locator.option.OptionLocatorFactory
org.jboss.arquillian.ajocado.utils.PrimitiveUtils
org.jboss.arquillian.ajocado.utils.URLUtils
org.testng.Assert
org.jboss.arquillian.ajocado.dom.Attribute
org.jboss.arquillian.ajocado.guard.RequestGuardFactory
-pekna skratka v eclipse je skocenie na chybu pomocou "ctrl" + "."

#########################################################################################################
niektore zmeny v API: 

getAsString nahradeny uz len getRawLocator pre ElementLocator

AjaxSeleniumProxy.getInstance(); nahradene AjaxSeleniumContext.getProxy();

SystemProperties na SystemPropertiesConfiguration a jeho metody uz niesu staticke ====>
seleniumDebug sa zistuje pomocou AjocadoConfigurationContext.getProxy().isSeleniumDebug() 

getNthOccurence bolo nahradene len metodou get volanou na Locator

RetrieverFactory.RETRIEVE_TEXT na TextRetriever.getInstance()

getNthChildElement(i) nieje v Ajocade, da sa nahradit: JQueryLocator(SimplifiedFormat.format("{0}:nth-child({1})", 
something.getRawLocator(), index)); (Metamer: PhaseInfo.java)

RequestTypeGuard sa zmenil na RequestGuardInterceptor

RequestTypeGuardFactory na RequestGuardFactory

RequestInterceptor na RequestGuard

CommandInterceptionException na CommandInterceptorException

keyPress berie ako argument char a nie String

keyPressNative berie ako argument int a nie String, teda sa moze volat hned KeyEvent.blabla

isNotDisplayed na elementNotVisible

selenium.isDisplayed na selenium.isVisible

selenium.getRequestInterceptor() na selenium.getRequestGuard() a potom na nom volana metoda clearRequestTypeDone() na 

clearRequestDone() a taktiez .getRequestTypeDone() na getRequestDone(), to iste ze waitForRequestTypeChange na waitForRequest

waitXhr, waitHttp nahradilo volanie napr.:guard(selenium, RequestType.XHR)

FrameLocator ma teraz dve implementacie - FrameIndexLocator a FrameDOMLocator

relativne frame locatory su zastresene teraz FrameRelativeLocator triedou

selenium.keyDown() berie ako parameter bud charakter alebo KeyCode rovno

#########################################################################################################################


getChild je myslim getNthChildElement
<lfryc> get je getNthOccurence
<lfryc> a iterator iteruje pres vsechny vyskyty

veci ktore musia byt portnute z richfaces-selenium na Ajocado:

-ReferencedLocator vypisat - fixol som tak ze som doplnil neimplementovane metody bez tela a komentol metody ktore sutam ine
taktiez som pouzil apostrofy v referenced lokatory propertyLocator, treba nastavit workflow pre 
pouzivanie znakov v lokatoroch ktore maju byt escapnute, v metode pjq sa escapuje automaticky !!!!!!!!!!!

-TestMethodSelector vypisat - importoval som zo rf-selenia
-ConsoleStatusTestListener //v drone jira
-FailureLoggingTestListener -||-, fixol som tak ze som komentol celu triedu co chce tuto triedu
-SeleniumLoggingTestListener nieje jira, fixol som tak ze som komentol celu triedu co chce tuto triedu
-TestInfo nepotrebujem, fix: comment whole class
-v DataScroller.java doplnene metody iterator, get, size, isSeleniumRepresentation z defaultnym telom
-ColumnModel implementoval som tam getNthChil   dElement
-default methods in ColumnModel, PanelMenu and also in others
-getAllItems and getAllGroups commented in PanelMenu
-import z rf-selenia SystemProperties

#########################################################################################################################

v arquilliane je ina verzia TestNG, vyssia, zmenilo sa tam trocha API, napr v MatrixConfigurator:85:
 z methodInstance.getMethod().getConstructorOrMethod().getMethod()
 na
 methods.add(methodInstance.getMethod().getMethod());

#########################################################################################################################

 v metameri sa povodne nepocitalo z Arquillian before method, preto to robilo problemy v metode:
 MatrixConfigurator.beforeInvocation, vyriesene tak ze sa pridal check na to ci to nieje beforeSuiteConf:
 if (invokedMethod.getTestMethod().isBeforeSuiteConfiguration()) {
            	return;
 }

 #########################################################################################################################

 zaregistrovanie listenera pre TestNG, ktory riesi anotacie ako Inject atd.:
 <plugin>
	<groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>                
            <version>2.9</version>
            <configuration>
            <testFailureIgnore>true</testFailureIgnore>
            <!-- Logging configuration for Selenium -->
            <argLine>-Djava.util.logging.config.file=${project.build.testOutputDirectory}/logging.properties -Dtemplates='${templates}'</argLine>
            <properties>
              <property>
               <name>listener</name>
               <value>${testng.listeners}</value>
              </property>
            </properties>
            </configuration>
  </plugin>

 #########################################################################################################################

v AbstractMetamerTest su pri anotacii Template nie vsetky template ?

 #########################################################################################################################

setol som plain as default template

 #########################################################################################################################

 co sa tyka lokatorov:

 z lokatora boli odstranene metody ako:

 getNthChildElement(int index), getNthOccurence(int index), getAllChildren(), getAllOccurrences(), getChildren(T elementLocator) , getDescendants(T elementLocator), getAsString()


   a OSTALI len:

getChild(T elementLocator), getDescendant(T elementLocator), getAttribute(Attribute attribute), getLocationStrategy()
    getRawLocator(), format(Object... args), get(int index) , iterator(), size(), inSeleniumRepresentation()


    PRETOZE okrem ineho locatory teraz implementuju rozhranie Iterable, a pomocou iteratora sa daju nahradit skoro
    vsetky vyssie zmienene metody

##########################################################################################################################

co treba rucne zmenit:

AbstractRichMessageTest.testAjaxRendered - posledny wait na waitGui.until(elementPresent.locator( jq(getTestElemLocator().getRawLocator() + ":empty")) );
testRendered -  waitGui.until(elementNotPresent.locator( jq( getTestElemLocator().getRawLocator() )));
testShowSummary - waitGui.until(elementNotPresent.locator( jq( getSummaryElemLocator().getRawLocator() )));
testShowDetail - waitGui.until(elementNotPresent.locator( jq(getDetailElemLocator().getRawLocator() )));

TextContainsCondition.getJavaScriptCondition - ked chcem ziskat lokator strategy + selector tak musim volat nie getRawString, ale toString, povodne tam bolo getAsString()

niekde je potreba perd tym ako dam keyPress na input a ocakavam popup dat click na ten input, e.g. TestRichSelect.testFiltering 
 ########################################################################################################################

vela testov ktore padlo na waitTimeOut alebo element not found padli kvoli tomu ze pre tym sa pouzivalo elementDisplayed ktore ked element chybal tak vracalo true, teraz pouzivam elementVisible s JavaDocom
Determines if the specified element is visible. An element can be rendered invisible by setting the CSS "visibility" property to "hidden", or the "display" property to "none", either for the element itself or one if its ancestors. This method will fail if the element is not present.

vela testov pada kvoli ARQAJO-102

21.12. trunk migration - need to migrate manually : OrderingList, 

Rozbor tohoto jobu:
https://hudson.qa.jboss.com/hudson/view/RF-QE/job/richfaces-4.1-debug-metamer-in-arq-server-compatibility/15/testReport/

136 total of failures

ARQAJO-102 - improper retrieving of element value
7 testDisabled, 1 testReadOnly, 1testEnableManualInput, testIsmap

elemntVisible vs. isDisplayed
testRendered 17, testClick 2, 3 testFor
+ testSwitchTypeAjax , testSwitchTypeNull, testClickCancelButton, testEditEvent, testShowControls, 
testOpenOnEdit, testSaveOnBlurSelectFalseFalse, testSaveOnBlurSelectFalseTrue, testSaveOnBlurSelectFalseTrue
testSaveOnBlurSelectTrueTrue,testSaveOnBlurSelectTrueTrue,

+6 +6 +6 AjaxRendered, testShowSummary ,testShowDetail   zle testy, mekomitol som zmeny korektne - done

jquery error: 9 TestTreeSimple.testIconCollapsed - done

expected failures(tests are anotated with 4.Future):
4 testSorting, 7 testScroller, testClasses, testSortModeSingleRerenderAll, testSortModeMultiRerenderAll, testSortModeSingleRerenderAll, testSortModeMultiRerenderAll, testMultiSelectionUsingCtrlAndShiftCombinations,
testOnError, testIntegerMin

tests which I do not know why they are failing:
TestTreeSimple.testSelectionClientSideEvents, 

total number of posible corrected tests by my action: 69

############################################################################################################################
5.1. 2012 migration - svn trunk 23126 

co som zmenil:
TestRichDropDownMenu.testRendered() - komentujem posledny riadok - assertTrue(selenium.isDisplayed(fileMenu), "Menu should be displayed when item 1 is not rendered."); - pretoze to iste robi riadok pred nim

to iste pre:
TestRichMenuGroup.testRendered(), TestRichMenuItem.testRendered, TestRichToolbar.testRendered, 

TestRichGraphValidator.testRendered - zmenil posledny riadok - waitGui.until(elementNotVisible.locator(header));  - na  waitGui.until(elementNotPresent.locator(header));

TestRichInplaceSelect, TestRichInplaceSelectFAjax - niektore lokatory pri interakcii vyskakuju z div.content, preto ich nehladam pomocou pjq ale pomocou jq(popup)

TestRichInplaceSelect - testClickCancelButton - waitGui.failWith("Default label is not displayed.").until(elementVisible.locator(label)); - NA - waitModel.failWith("Default label is not displayed.").until(elementPresent.locator(label));

RichMessageTest.testFor - riadok - waitGui.until(elementNotVisible.locator(getTestElemLocator()); - NA - waitGui.until(elementPresent.locator(jq(getTestElemLocator().getRawLocator() + ":empty")));

TestRichTabPanelAddPanel1.testSwitchTypeNull - riadok  waitGui.failWith("Tab " + (index + 1) + " is not displayed.").until(
                elementVisible.locator(itemContentsFormat.format(index + 1))); - NA -  waitGui.failWith("Tab " + (index + 1) + " is not present.").until(
                elementPresent.locator(itemContentsFormat.format(index + 1))); // pretoze vo waite nemoze byt elementVisible, pretoze to padne hned ked tam ten prvok nieje

TestA4JCommandButton.testDisabled - assertEquals(isDisabled.toLowerCase(), "disabled", "The value of attribute disabled"); - NA - assertEquals(isDisabled.toLowerCase(), "true", "The value of attribute disabled");
                
to iste pre TestHCommandButton.testDisabled, TestRichCalendarAttributes.testDisabled, TestRichSlider.testDisabled
TestRichSpinner.testDisabled, TestRichSpinner.readOnly, TestPickList.testDisabled, TestRichSelect.testDisabled

donesene zmeny z 23132.(6.1. 2012)
U    ftest-source/src/main/java/org/richfaces/tests/metamer/ftest/richTreeModelAdaptor/TestTreeModelAdaptorSelection.java
U    ftest-source/src/main/java/org/richfaces/tests/metamer/ftest/richTree/AbstractTestTree.java
U    ftest-source/src/main/java/org/richfaces/tests/metamer/ftest/richTree/TestTreeSelection.java
A    ftest-source/src/main/java/org/richfaces/tests/metamer/ftest/richTree/AbstractTestTreeSelection.java
A    ftest-source/src/main/java/org/richfaces/tests/metamer/ftest/richHotKey/TestRichHotKeyAttributes.java
U    ftest-source/src/main/java/org/richfaces/tests/metamer/ftest/richHotKey/TestRichHotKey.java
U    ftest-source/src/main/java/org/richfaces/tests/metamer/ftest/richHotKey/HotKeyAttributes.java
U    ftest-source/src/main/java/org/richfaces/tests/metamer/ftest/richHotKey/AbstractRichHotKeyTest.java
U    ftest-source/src/main/java/org/richfaces/tests/metamer/ftest/AbstractMetamerTest.java

lokalne 10 testov padlo, 11.1. 2011, opravujem:
TestRichSlider.testEnableManualInput - readonly na true
TestRichTabPanel.testImmediate - elementVisible na elementPresent vo waite a to iste pre testItemChangeListener
TestAttributes.testIsmap - zmeneny atribut na true

12.1.2012  svn revision 23138.
zmigrovane testy z trunku ale uz iba tie co boli updatnute

